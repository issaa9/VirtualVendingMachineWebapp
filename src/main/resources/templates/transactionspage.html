<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Transaction History</title>
    <link rel="stylesheet" th:href="@{/css/general_styles.css}">
    <link rel="stylesheet" th:href="@{/css/transactionspage_styles.css}">
    <script th:src="@{/scripts/transactionspage_script.js}" defer></script>
</head>
<body>

<!-- H1 Heading for Webapp Title -->
<header>
    <h1 class="webapp-title">Virtual Vending Machine Webapp</h1>
</header>

<!-- Display Logged-In User -->
<div class="user-info">
    <p>Logged In As: <span th:text="${username}">Guest</span></p>
</div>

<main>
    <h2>Your Transactions History</h2>

    <!-- Filter Menu to Query the Data -->
    <div class="filter-menu">
        <h3>Querying/Filtering Transactions Menu</h3>

        <!-- Transaction ID Filter -->
        <label for="transactionId">Transaction ID:</label>
        <input type="text" id="transactionId" placeholder="Enter ID">

        <!-- Date Range Filters -->
        <div class="date-filters">
            <div class="date-input-container">
                <label for="startDate">Date From:</label>
                <input type="date" id="startDate">
            </div>
            <div class="date-input-container">
                <label for="endDate">Date To:</label>
                <input type="date" id="endDate">
            </div>
        </div>

        <!-- Money Filters -->
        <div class="money-filters">

            <!-- Total Cost Range -->
            <div class="money-column">
                <label for="minTotalCost">Total Cost:</label>
                <input type="number" id="minTotalCost" placeholder="Min £" min="0" step="1">
                <input type="number" id="maxTotalCost" placeholder="Max £" min="0" step="1">
            </div>

            <!-- Payment Received Range -->
            <div class="money-column">
                <label for="minPayment">Payment Received:</label>
                <input type="number" id="minPayment" placeholder="Min £" min="0" step="1">
                <input type="number" id="maxPayment" placeholder="Max £" min="0" step="1">
            </div>

            <!-- Change Given Range -->
            <div class="money-column">
                <label for="minChange">Change Given:</label>
                <input type="number" id="minChange" placeholder="Min £" min="0" step="1">
                <input type="number" id="maxChange" placeholder="Max £" min="0" step="1">
            </div>
        </div>

        <!-- Buttons -->
        <div class="filter-buttons">
            <button onclick="applyFilters()">Apply Filters</button>
            <button onclick="resetFilters()">Reset Filters</button>
        </div>

    </div>


    <!-- Transactions List -->
    <div class="transactions-container">
        <div class="transactions-table-wrapper">
            <table id="transactionsTable" class="transactions-table">
                <thead>
                    <tr>
                        <th id="transactionIdHeader" onclick="sortTableByColumn('id')">Transaction ID</th>
                        <th id="dateHeader" onclick="sortTableByColumn('date')">Date</th>
                        <th id="timeHeader" onclick="sortTableByColumn('time')">Time</th>
                        <th id="totalCostHeader" onclick="sortTableByColumn('totalCost')">Total Cost</th>
                        <th id="paymentReceivedHeader" onclick="sortTableByColumn('paymentReceived')">Payment Received</th>
                        <th id="changeGivenHeader" onclick="sortTableByColumn('changeGiven')">Change Given</th>
                        <th>Receipt</th>
                    </tr>
                </thead>
                <tbody>
                <!-- Transactions will be dynamically inserted here -->
                </tbody>
            </table>
        </div>
    </div>

</main>

<!-- Home Button -->
<a th:href="@{/home}" class="home-button-link">
    <button class="home-button">Home</button>
</a>

</body>
</html>
