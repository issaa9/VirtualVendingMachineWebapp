<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="eng">
<head>
    <meta charset="UTF-8">
    <title>User Analytics</title>
    <link rel="stylesheet" th:href="@{/css/general_styles.css}">
    <link rel="stylesheet" th:href="@{/css/analyticspage_styles.css}">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Open Source Icon Library -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
</head>
<body>

<header>

    <h1 class="webapp-title">Virtual Vending Machine Webapp</h1>

    <!-- Display Logged-In User -->
    <div class="user-info">
        <p>Logged In As: <span th:text="${username}">Guest</span></p>
    </div>
</header>


<main>
    <h2 class="page-heading">Your Analytics</h2>

    <div class="analytics-container">

        <!-- Summary (Cards) Section -->
        <section class="summary-section">

            <h3 class="section-title">Purchase Summary</h3>
            <div class="summary-card-container">
                <div class="summary-card">
                    <i class="fa-solid fa-bag-shopping card-icon"></i>
                    <div class="card-stat" id="totalPurchases">--</div>
                    <div class="card-label">Total Purchases</div>
                </div>
                <div class="summary-card">
                    <i class="fa-solid fa-sterling-sign card-icon"></i>
                    <div class="card-stat" id="totalSpent">--</div>
                    <div class="card-label">Total Spent</div>
                </div>
                <div class="summary-card">
                    <i class="fa-solid fa-calendar-check card-icon"></i>
                    <div class="card-stat" id="activeDay">--</div>
                    <div class="card-label">Most Active Day</div>
                </div>
                <div class="summary-card">
                    <i class="fa-solid fa-boxes-stacked card-icon"></i>
                    <div class="card-stat" id="uniqueItems">--</div>
                    <div class="card-label">Unique Items Purchased</div>
                </div>
            </div>

        </section>

        <div class="section-divider"></div>

        <!-- Purchase Frequency Section -->
        <section class="analytics-section">

            <h3 class="section-title">Purchase Frequency Over Time</h3>
            <div class="chart-container">
                <canvas id="purchaseFrequencyChart" class="purchase-frequency-chart"></canvas>
            </div>

        </section>

        <div class="section-divider"></div>

        <!-- Spending Trend Section -->
        <section class="analytics-section">

            <h3 class="section-title">Spending Trend</h3>
            <div class="chart-container">
                <canvas id="spendingTrendChart" class="spending-trend-chart"></canvas>
            </div>

        </section>

        <div class="section-divider"></div>

    </div>
</main>

<!-- Home Button -->
<a th:href="@{/home}" class="home-button-link">
    <button class="home-button">Home</button>
</a>

<script th:src="@{/scripts/analytics_script.js}"></script>
</body>
</html>

